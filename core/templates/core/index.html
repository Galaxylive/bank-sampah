{% extends "base.html" %}
{% block content %}

{% if nasabah_list %}

<!--Grid row-->
<div class="row wow fadeIn animated" style="visibility: visible; animation-name: fadeIn;">

	<!--Card-->
	<div class="card mt-2 ml-5">
		<div class="card-header">
			Nasabah <a href="/user/add" class="badge badge-success">Tambah</a>
		</div>
		<!--Card content-->
		<div class="card-body">
			<!-- Table  -->
			<table class="table table-hover">
				<!-- Table head -->
				<thead class="blue lighten-4">
					<tr>
						<th>#</th>
						<th>Nama</th>
						<th>Saldo</th>
						<th>Transaksi</th>
						<th>Alamat</th>
						<th>Terakhir diedit</th>
					</tr>
				</thead>
				<!-- Table head -->

				<!-- Table body -->
				<tbody>
					{% for object in nasabah_list %}
					<tr>
						<th scope="row">{{ object.pk }}</th>
						<td>{{ object.name }} <a href="{{ object.get_absolute_url }}" class="badge badge-primary">Edit</a></td>
						<td>{{ object.balance }}</td>
						<td><a href="{{ object.get_order_url }}" class="badge badge-success">Tambah</a> <a href="{{ object.get_absolute_url }}" class="badge badge-danger">Kurang</a></td>
						<td>{{ object.addres }}</td>
						<td>{{ object.timestamp }}</td>
					</tr>
					{% endfor %}
				</tbody>
				<!-- Table body -->
			</table>
			<!-- Table  -->

		</div>

	</div>
	<!--/.Card-->

</div>
<!--Grid row-->

{% else %}
{% endif %}

{% if orders %}
<!--Grid row-->
<div class="row wow fadeIn animated" style="visibility: visible; animation-name: fadeIn;">

	<!--Card-->
	<div class="card mt-2 ml-5">
		<div class="card-header">
			Order
		</div>
		<!--Card content-->
		<div class="card-body">

			<!-- Table  -->
			<table class="table table-hover">
				<!-- Table head -->
				<thead class="blue lighten-4">
					<tr>
						<th>#</th>
						<th>Nama</th>
						<th>Barang</th>
						<th>Harga</th>
						<th>Jumlah</th>
						<th>Total</th>
					</tr>
				</thead>
				<!-- Table head -->

				<!-- Table body -->
				<tbody>
                    {% for order in orders %}
					{% for orderitem in order.items.all %}
					<tr>
						<th scope="row">{{ orderitem.pk }}</th>
						<td>{{ orderitem.nasabah }}</td>
						<td>{{ orderitem.item.name }}</td>
						<td>{{ orderitem.item.price }}</td>
						<td>{{ orderitem.value }}</td>
						<td>{{ orderitem.sum }}</td>
					</tr>
					{% endfor %}
                    {% endfor %}
				</tbody>
				<!-- Table body -->
			</table>
			<!-- Table  -->

		</div>

	</div>
	<!--/.Card-->
{% endif %}

{% endblock content %}